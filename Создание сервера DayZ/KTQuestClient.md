

# Документация
## Основная структура составления квеста

Структура квеста:
{
	- ID (целочисленное значение, должно быть уникальным!)
	- Cooldown (интервал между выполнением задания в секундах, -1 для единоразового выполнения)
	- TimeLimit (ограничение времени на выполнение, в секундах /\3600 = 1 час/\ -1 для отключения)
	- Name (Название задания)
	- Description (Развернутое описание задания)
	- RequiredQuests (массив ID заданий, которые дожны быть выполнены для взятия этого задания)
		Пример: "RequiredQuests" : [1, 3, 4] (Это задание можно взять если выполнены эти 3 предыдущих)
	- Targets (цели задания)
		Пример: "Targets" : [
			{
				"type": "SurvivorM_Mirek", 			//класснейм
				"count": 5 							//количество
				"extra" : "KitchenKnife",			//строка, используется в заданиях на убийство, означает оружие с которого нужно убивать цели
				"questType": 1,						//целочисленное значение, определяет тип задания: убийство, поиск вещей и тд.
				"description" : "Выживший Мирек", 	// строка, используется в графе Цели, в книжке с заданиями
				"conditions" : [-1, -1]
			},
			{
				"type": "Zombie", 					//класснейм
				"count": 5 							//количество
				"extra" : ""						//если строка отсутствует, либо она пустая, убийство засчитывается в любом случае
				"description" : "Любой зомби",
				"conditions" : [-1, -1]
			}
		] (Для выполнения задания нужно убить 5 персонажей Mirek и убить 5 любых зомби, при условии что тип задания /\убийство/\)
	- Rewards (список наград)
	Пример: "Rewards" : [
			{
				"type": "WaterBottle", 		//класснейм
				"count": 3 					//количество
				"extra" : "",
				"description" : "Родникова вода", // строка, используется в графе Цели, в книжке с заданиями
				"conditions" : [-1, -1]
			} (игрок получит 3 бутылки воды, строка description имеет приоритет над ванильным названием предмета, в графе награда игрок увидит "Родниковая вода 3")
		]
}

Обощенные цели для убийст:
{
	type : "AnimalBase" // любое животное будет засчитано

	type : "SurvivorBase" // любой игрок будет засчитан
	type : "SurvivorMale_Base" // игрок мужского пола
	type : "SurvivorFemale_Base" // игрок женского пола

	type : "ZombieBase" // любой зомби будет зачитан
	type : "ZombieFemaleBase" // зомби женского пола
	type : "ZombieMaleBase" // зомби мужского пола
	type : "ZmbM_SoldierNormal_Base" // зомби военный
	type : "ZmbM_usSoldier_normal_Base" // зомби военный
}

Типы квестов:
{
	1 : Убийство кого-либо
	2 : Доставка предметов (При завершении задания целевые предметы удаляются)
	3 : Поиск предметов (При завершении задания целевые предметы НЕ удаляются, например - Задание: заработать 100.000 рублей)
	4 : Крафт предметов
	5 : Ловля на удочку чего-либо (Рыбалка)
	6 : Сорвать растение (Садоводство, растение не должно быть сгнившим)
	7 : Разведка
	8 : Действие
}

Скрипт позволяет создавать мульти задания (задания в которых цели квеста могут отличаться типами)
Пример:

[
	{
		"ID" : 100, // айди задания 100
		"Cooldown": -1, // задание не имеет времени перезарядки, а значит может быть выполнено только 1 раз
		"TimeLimit" : -1, // задание не имеет ограничения по времени на выполнение
		"Name": "Рыбалка 1: Основы",
		"Description": "Для рыбалки нужна удочка, ты можешь смастерить собственную из длинной палки и веревки, а также понадобится крючок. Его ты можешь сделать из костей.",
		"RequiredQuests" : [], // задание доступно изначально
		"Targets" : [
			{
				"type" : "ImprovisedFishingRod",
				"questType": 4,
				"count": 1,
				"extra": "",
				"description": "Сделать самодельную удочку",
				"conditions" : [-1, -1]
			},
			{
				"type" : "BoneHook",
				"questType": 4,
				"count": 2,
				"extra": "",
				"description": "Выточить крючок из кости",
				"conditions" : [-1, -1]
			},
			{
				"type" : "Carp",
				"questType": 5,
				"count": 1,
				"extra": "",
				"description": "Поймать карпа",
				"conditions" : [-1, -1]
			},
			{
				"type" : "Carp",
				"questType": 1,
				"count": 1,
				"extra": "Deagle_Gold",
				"description": "Размозжить бошку карпу с помощью золотого дигла",
				"conditions" : [-1, -1]
			}
		],
		"Rewards" : [
			{
				"type" : "Worm",
				"count": 3,
				"extra": "",
				"conditions" : [-1, -1]
			}
		]
	}
]

Обратите внимание что у целей разные типы, квест будет завершен после:

 - Крафта удочки 1шт
 - Крафта крючка из костей 2шт
 - Поймать рыбу
 - Убийство карпа с помощью золотого дигла (карп должен стать руинед в следствии стрельбы по нему)


Эти цели можно выполнять в произвольном порядке.


Настройка наград:

{
	"type" : "Nail",	// класснейм награды
	"count": 3,			// количетсво экземпляров объекта
	"extra": ""			// если это количественный объект (гвозди, патроны, магазин для оружия) этот паметр задает количество
	"conditions" : [x, -1]	// значение "x" означает с каким уровнем здоровья будет награда (0 - pristine, 1 - worn ... 4 - ruined)
}

 	- В случае выше игрок получит 3 полных стака гвоздей, то есть 70 + 70 + 70 гвоздей

{
	"type" : "Nail",
	"count": 3,
	"extra": "10"
}
	- В случае выше игрок получит 3 стака гвоздей по 10 шт в каждом, то есть 10 + 10 + 10 гвоздей

{
	"type" : "Nail",
	"count": 3,
	"extra": "10%"
}
	- В случае выше игрок получит 3 стака гвоздей по 10% от общего количества в каждом, стак гвоздей 70 шт, игрок получит 7 + 7 + 7 гвоздей


## Уточнения по состояний объекта и квестов

Добавления:
	- Каждому элементу цели/награды добавлен новый параметр "conditions : уровень здоровья, процентное количиство"
		Уровни здоровья:
			0 - pristine
			1 - worn
			2 - damage
			3 - badly damage
			4 - ruined
		Значение для элемента target: имеет значение только для квестов на поиск/доставку предметов, первое значение задает минимальный уровень здоровья предмета, второй параметр задает минимальное количество
		(в процентном соотношении) для учета.
		пример_№1:
			"Targets" : [
				{
					"type" : "WaterBottle",
					"questType": 2,
					"count": 1,
					"extra": "",
					"description": "Принеси воды",
					"conditions": [0, 20]
				}
			]
		- бутылка воды будет засчитана если уровень здоровья не ниже pristine и количество воды в бутылке не менее 20%
		пример_№2:
			"Targets" : [
				{
					"type" : "WaterBottle",
					"questType": 2,
					"count": 1,
					"extra": "",
					"description": "Принеси воды",
					"conditions": [-1, -1]
				}
			]
		- бутылка воды будет засчитана при любом уровне здоровья и и при любом количестве.
		пример_№3:
			"Targets" : [
				{
					"type" : "Nail",
					"questType": 2,
					"count": 150,
					"extra": "",
					"description": "Принеси гвозди",
					"conditions": [1, 50]
				}
			]
		- Гвозди будут засчитаны если уровень здоровья не ниже Worn и !ВАЖНО! колво гвоздей в стаке не менее 50% от максимального количества (в стаке 70 гвоздей, 
			если игрок будет иметь 2 стака по 34 гвоздя в каждом оба стака не будут засчитаны так как они не проходят по процентному соотношению).
		Значение для элемента reward: для награды будет учитываться только первое значение из condition, то есть уровень здоровья предмета (Количество прописывается в extra)

	- В конфиг с нпц добавлен параметер "QuestSlots" параметр отвечает за кол-во квестов, которые будут выполняться в процессе.
		пример:
		QuestSlots : 3
		игрок сможет выполнять одновременно 3 квеста, он не сможет взять 4й квест.
	- В конфиг с нпц добавлен параметер "HideUnavailableQuests" (значения 0/1), если параметр включен (1) категория "Недоступные задания" будет скрыта.
	- В конфиг с нпц добавлен параметер "CanCancelQuest" (значения 0/1), если параметр включен (1) то задания в процессе можно отменить.
	- Новый тип квеста "Разведка" ("questType": 7), суть квеста заключается в посещении одной или нескольких точек на карте.
		пример:
		{
			"type" : "2155 0 2279",
			"questType": 7,
			"count": 1,
			"extra": "1",
			"description": "Иди к сундуку около речки",
			"conditions": [5, -1]
		}
		параметр "type" отвечает за координату, "count" - ВСЕГДА ДОЛЖНО БЫТЬ 1, первый эелемент в параметре conditions означает расстояние в метрах
			на которое игроку нужно приблизиться к точке (в данном случае это 5 метров)
		второй элемент в параметре conditions означает будет ли высота целевой координаты высчитывать на основании высоты земли над уровнем моря,
			либо высота не будет изменять (если -1 то высота будет высчитана на основании земли, в данном примере фактическая координата будет "2155 5.9 2279")
		параметр extra влияет на то, сможет ли игрок увидеть цель на карте ("extra" : "1" = сможет, любое другое значение = нет)
	- Добавлен новый параметр "ImportanceNPC"(важность нпс) значения 0/1/2
		значение 0:
			нпц вообще не нужны, любое задание принимается/завершается без их участия, прописывать id заданий также не требуется.
		значение 1:
			если старт задания прописан в каком-нибудь нпц, то это задание можно взять только у этого нпц, если старт задания никому не принадлежит,
			то это задание можно принять в любое время/в любом месте, с завершением аналогично.
		значение 2:
			квесты принимаются и завершаются ТОЛЬКО с участием нпц

	- Новый тип квеста "Действие" ("questType": 8), суть квеста заключается в выполнение некоторых действий из списка Action.txt
	Пример:
	"Targets" : [
			{
				"type" : "ActionBandageSelf",
				"questType": 8,
				"count": 1,
				"extra": "",
				"description": "Перевязать себе раны",
				"conditions": [-1, -1]
			},
			{
				"type" : "ActionDigWorms",
				"questType": 8,
				"count": 1,
				"extra": "",
				"description": "Накопать червей",
				"conditions": [-1, -1]
			},
			{
				"type" : "ActionActivateTrap",
				"questType": 8,
				"count": 1,
				"extra": "",
				"description": "Активировать ловушку",
				"conditions": [-1, -1]
			},
			{
				"type" : "ActionLockDoors",
				"questType": 8,
				"count": 1,
				"extra": "",
				"description": "Запереть дверь",
				"conditions": [-1, -1]
			},
			{
				"type" : "ActionSkinning",
				"questType": 8,
				"count": 1,
				"extra": "Animal_GallusGallusDomesticus",
				"description": "Разделать петушка",
				"conditions": [-1, -1]
			},
			{
				"type" : "ActionSkinning",
				"questType": 8,
				"count": 1,
				"extra": "",
				"description": "Разделать любую тушу",
				"conditions": [-1, -1]
			}
		]
		extra - класснейм объекта с котором происходит взаимодействие (опционально)


## Виды действий 

ActionActivateTrap							= установить ловушку
ActionBreakLongWoodenStick					= поломать длинную палку на мелкие
ActionBuildOven								= Построить печь 
ActionBuildPart								= Построить часть забора/стройки
ActionBuildStoneCircle						= Выложить круг из камней
ActionBuryAshes								= Закопать
ActionBuryBody								= Закопать тело
ActionCookOnStick							= Готовить на палке
ActionCoverHeadSelf							= Надеть мешок себе
ActionCoverHeadTarget						= Надеть мешок цели
ActionCreateGreenhouseGardenPlot			= Вскопать садовый участок
ActionDeployObject							= Установить объект
ActionDestroyCombinationLock				= Уничтожить замок
ActionDestroyPart							= Уничтожить часть забора/стройки
ActionDialCombinationLock					= Набрать номер на замке в руках
ActionDialCombinationLockOnTarget			= Набрать номер на замке на объекте
ActionDigGardenPlot							= Вскопать садовый участок
ActionDigInStash							= Закопать предмет
ActionDigOutStash							= Выкопать предмет
ActionDigWorms								= Накопать червей
ActionDisarmMine							= Обезвредить мину
ActionDisinfectPlant						= Дезинфицировать растение
ActionDismantleGardenPlot					= Убрать садовый участок
ActionDismantleOven							= Разобрать печь
ActionDismantlePart							= Разобрать часть забора/стройки
ActionDismantleStoneCircle					= Разобрать круг из камней
ActionDrinkPondContinuous					= Глоток из пруда
ActionDrinkWellContinuous					= Глоток из колонки
ActionFertilizeSlot							= Удобрить грядку
ActionFoldBaseBuildingObject				= Свернуть кит стройки
ActionGagSelf								= Вставить кляп себе
ActionGagTarget								= Вставить кляп цели
ActionIgniteFireplaceByAir					= Раздуть костер
ActionLightItemOnFire						= Поджечь предмет с помощью костра
ActionLockDoors								= Закрыть дверь отмычкой
ActionLowerFlag								= Опустить флаг
ActionMineBush								= Срезать куст
ActionMineRock								= Дробить породу
ActionMineTree								= Рубить дерево
ActionMountBarbedWire						= Прикрепить колючую проволку к забору
ActionPlaceOnGround							= Разместить объект (моментально)
ActionRaiseFlag								= Поднять флаг
ActionRepairCarChassis						= Починить шасси
ActionRepairCarEngine						= Починить двигатель
ActionRepairCarPart							= Починить часть машины эпоксидкой
ActionRepairPart							= Починить часть забора/стройки
ActionRepairShelter							= Починить самодельную палатку
ActionRepairTent							= Починить тент
ActionRepairTentPart						= Починить часть тента
ActionRestrainSelf							= Связать себе руки
ActionRestrainTarget						= Связать себе цели
ActionSawPlanks								= Напилить досок с паллета
ActionShave									= Побрить себя
ActionShaveTarget							= Побрить цель
ActionSkinning								= Разделать тушу
ActionTransferLiquid						= Слить/налить жидкость
ActionTuneFrequency							= Изменить частоту (радиоприемник)
ActionTuneRadioStation						= Сменить радиостанцию
ActionUncoverHeadSelf						= Снять мешок с себя
ActionUncoverHeadTarget						= Снять мешок с цели
ActionUngagSelf								= Снять кляп себе
ActionUngagTarget							= Снять кляп цели
ActionUnlockDoors							= Отпереть дверь (отмычкой)
ActionUnMountBarbedWire						= Убрать колючую проволоку
ActionUnpackBox								= Распаковать коробку (патроны и тд)
ActionUnrestrainSelf						= Освободить руки себе
ActionUnrestrainTarget						= Освободить руки цели
ActionUpgradeTorchFromGasPump				= Пропитать факел топливом
ActionWaterPlant							= Полить цветы
ActionWringClothes							= Отжать что-то
ActionBandageSelf							= Перебинтовать себя
ActionBandageTarget							= Перебинтовать цель
ActionBurnSewSelf							= Обработать рану себе
ActionBurnSewTarget							= Обработать рану цель
ActionCPR									= Непрямой массаж сердца
ActionDefibrilateSelf						= Дефребрелятнуть себя
ActionDefibrilateTarget						= Дефребрелятнуть цель
ActionGiveBloodSelf							= Сделать переливание крови себе
ActionGiveBloodTarget						= Сделать переливание крови цели
ActionGiveSalineSelf						= Провести вливание себе (салин)
ActionGiveSalineTarget						= Провести вливание цели (салин)
ActionMeasureTemperatureSelf				= Изменить температуру себе
ActionMeasureTemperatureTarget				= Измерить температуру цели
ActionSewSelf								= Зашить рану себе
ActionSewTarget								= Зашить рану цели
ActionSplintSelf							= Наложить шину себе
ActionSplintTarget							= Наложить шину цели
ActionTestBloodSelf							= Сделать анализ своей крови себе
ActionTestBloodTarget						= Сделать анализ своей крови цели
ActionStartEngine							= Завести двигатель
ActionBuildShelter							= Построить кожаное укрытие
ActionPackTent								= Свернуть палатку	